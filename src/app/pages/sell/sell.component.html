<div class="sell-container">
  <div class="sell-card">
    <h1>üí∞ Sell Your Instrument</h1>
    <p class="subtitle">List your musical instrument for sale</p>

    <form (ngSubmit)="onSubmit()" class="form">
      <div class="form-row">
        <div class="form-group">
          <label for="name">Instrument Name *</label>
          <input
            id="name"
            type="text"
            [(ngModel)]="name"
            name="name"
            placeholder="e.g., Fender Stratocaster"
            required
          />
        </div>

        <div class="form-group">
          <label for="category">Category *</label>
          <select [(ngModel)]="category" name="category" required>
            <option *ngFor="let cat of categories" [value]="cat">
              {{ cat }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-row">
        <div class="form-group">
          <label for="price">Price ($) *</label>
          <input
            id="price"
            type="number"
            [(ngModel)]="price"
            name="price"
            placeholder="0.00"
            min="0"
            step="0.01"
            required
          />
        </div>

        <div class="form-group">
          <label for="condition">Condition *</label>
          <select [(ngModel)]="condition" name="condition" required>
            <option *ngFor="let cond of conditions" [value]="cond">
              {{ cond }}
            </option>
          </select>
        </div>
      </div>

      <div class="form-group">
        <label for="description">Description *</label>
        <textarea
          id="description"
          [(ngModel)]="description"
          name="description"
          placeholder="Describe your instrument's condition, features, and any history. Minimum 20 characters."
          rows="5"
          required
        ></textarea>
        <span class="char-count">{{ description.length }}/500 characters</span>
      </div>

      <div class="form-group">
        <label>Product Images (Optional)</label>
        <div class="file-input-wrapper" (click)="fileInput.click()">
          <input
            #fileInput
            type="file"
            accept="image/*"
            multiple
            (change)="onImagesSelected($event)"
            class="hidden-input"
          />
          <span class="file-label">{{ uploadedImages.length > 0 ? uploadedImages.length + ' image(s) selected' : 'üìÅ Click to choose image files' }}</span>
        </div>
        <span class="hint">Accepted formats: JPG, PNG, GIF, WebP (Max 5MB per image). Select multiple images.</span>
      </div>

      <div *ngIf="uploadedImages.length > 0" class="images-gallery">
        <p class="gallery-title">Select which image to use as the product image:</p>
        <div class="gallery-grid">
          <div *ngFor="let img of uploadedImages; let i = index" class="gallery-item" [class.selected]="i === selectedImageIndex">
            <img [src]="img" alt="Product image" (click)="selectImage(i)" />
            <button type="button" class="delete-btn" (click)="deleteImage(i)">‚úï</button>
            <span *ngIf="i === selectedImageIndex" class="selected-badge">‚úì Selected</span>
          </div>
        </div>
      </div>

      <button type="submit" class="btn-submit" [disabled]="loading">
        {{ loading ? 'Listing...' : 'List for Sale' }}
      </button>
    </form>

    <p class="help-text">
      * Required fields
    </p>

    <div class="links">
      <a routerLink="/my-listings" class="link">View My Listings</a>
      <a routerLink="/" class="link">‚Üê Back to Home</a>
    </div>
  </div>
</div>
